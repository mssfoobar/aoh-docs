"use strict";(self.webpackChunkaoh_documentation=self.webpackChunkaoh_documentation||[]).push([[6370],{64687:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var r=t(74848),o=t(28453),s=t(45645),i=t(7227);const l={sidebar_position:2},a="Development",c={id:"modules/gis/development",title:"Development",description:"// TODO:",source:"@site/docs/40_modules/40_gis/development.md",sourceDirName:"40_modules/40_gis",slug:"/modules/gis/development",permalink:"/aoh-docs/docs/modules/gis/development",draft:!1,unlisted:!1,editUrl:"https://github.com/mssfoobar/aoh-docs/tree/main/docs/40_modules/40_gis/development.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"gis",previous:{title:"Geospatial Information System",permalink:"/aoh-docs/docs/modules/gis/introduction"},next:{title:"Geo-Entities",permalink:"/aoh-docs/docs/modules/gis/geoentity"}},u={},d=[{value:"Tools Required",id:"tools-required",level:2},{value:"Processing",id:"processing",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"development",children:"Development"}),"\n",(0,r.jsxs)(n.p,{children:["// TODO:\nSee multi-root workspaces\n",(0,r.jsx)(n.a,{href:"https://code.visualstudio.com/docs/editor/multi-root-workspaces",children:"https://code.visualstudio.com/docs/editor/multi-root-workspaces"})]}),"\n",(0,r.jsx)(n.h1,{id:"pre-processing",children:"Pre-processing"}),"\n",(0,r.jsx)(n.h2,{id:"tools-required",children:"Tools Required"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AutoCAD LT"}),"\n",(0,r.jsx)(n.li,{children:"QGIS (Quantum Geographic Information System)"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ogr2ogr"})," from GDAL"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Building floor plans typically come in drawing formats such as ",(0,r.jsx)(n.code,{children:".dwg"}),", which is predominantly used by AutoCAD. To open\nthis file, you can use ",(0,r.jsx)(n.code,{children:"LibreCAD"})," or preferably ",(0,r.jsx)(n.code,{children:"AutoCAD"})," or ",(0,r.jsx)(n.code,{children:"AutoCAD LT"}),'. The goal is to convert the drawing into\nGeoJSON, along with tag it with additional attributes that conforms to our concept of "Building" geo entities.']}),"\n",(0,r.jsx)(n.h2,{id:"processing",children:"Processing"}),"\n",(0,r.jsxs)(n.p,{children:["The first thing you should do is to filter out which layers in the ",(0,r.jsx)(n.code,{children:".dwg"})," are of interest to you. Open up the file,\nfigure out what you need to keep, which would typically be walls and columns, and write these layers down. In our\nexample, we'll assume you want to keep the following layers:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"WINDOW"}),"\n",(0,r.jsx)(n.li,{children:"WALL"}),"\n",(0,r.jsx)(n.li,{children:"COLUMN"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Then, save the file as a ",(0,r.jsx)(n.code,{children:".dxf"}),". ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," does not play well with ",(0,r.jsx)(n.code,{children:".dwg"})," files, so use LibreCAD or AutoCAD to save the\nfile in ",(0,r.jsx)(n.code,{children:".dxf"}),". The result will be a ",(0,r.jsx)(n.code,{children:".dxf"})," file that can be processed by ",(0,r.jsx)(n.code,{children:"ogr2ogr"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["We've tried mass converting files using tools but the result was not processable by ",(0,r.jsx)(n.code,{children:"ogr2ogr"}),". You can experiment\nto get such tools to help deal with batch conversion but we only ever got ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," readable conversions from LibreCAD\nand AutoCAD."]})}),"\n",(0,r.jsxs)(n.p,{children:["Next, use ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," to convert the drawing to GeoJSON with WGS84 as the coordinate reference system. ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," does not\nproperly convert ",(0,r.jsx)(n.code,{children:".dwg"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"layer names"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(i.default,{value:"Windows PowerShell",label:"Windows PowerShell",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ogr2ogr `\n-progress `\n-dialect sqlite `\n-sql \"SELECT * FROM entities WHERE layer in ('WALL', 'WINDOW', 'COLUMN')\" `\n-f 'GeoJSON' .\\output_file_name.geojson .\\input_file_name.dxf `\n-t_srs EPSG:4326 `\n-s_srs EPSG:3414\n"})})}),(0,r.jsx)(i.default,{value:"Linux",label:"Linux",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ogr2ogr \\\n-progress \\\n-dialect sqlite \\\n-sql \"SELECT * FROM entities WHERE layer in ('WALL', 'WINDOW', 'COLUMN')\" \\\n-f 'GeoJSON' .\\output_file_name.geojson .\\input_file_name.dxf \\\n-t_srs EPSG:4326 \\\n-s_srs EPSG:3414\n"})})})]}),"\n",(0,r.jsxs)(n.p,{children:["This does not georectify your GeoJSON, but transforms it to be in ",(0,r.jsx)(n.code,{children:"WGS84"})," format, which is what GeoJSON is supposed to\nbe in. You can then further transform the points to be properly georectified by running it through ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," again. But\nfirst, we need to find 3 reference coordinates that we can pass to ",(0,r.jsx)(n.code,{children:"ogr2ogr"})," to do the transformation."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cat .\\OMEGA_ONE_STY_7.geojson | jq 'del(.features[].properties.PaperSpace, .features[].properties.SubClasses, .features[].Linetype )' > new.geojson\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"aws codeartifact login --tool npm --repository ar2-npm-group --namespace fortawesome --domain agilrad --domain-owner 991204835536\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:".DWG > ODAFIleConverter("}),".DWG) > ",(0,r.jsx)(n.em,{children:".DXF > LibreCAD("}),".DXF) > ",(0,r.jsx)(n.em,{children:".DXF > ogr2ogr2("}),".DXF) > .GeoJSON >"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},7227:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});t(96540);var r=t(18215);const o={tabItem:"tabItem_Ymn6"};var s=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,i),hidden:t,children:n})}},45645:(e,n,t)=>{t.d(n,{A:()=>p});var r=t(96540),o=t(18215),s=t(24245),i=t(8626),l=t(11062);const a={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var c=t(74848);function u(e){let{className:n,block:t,selectedValue:r,selectValue:i,tabValues:l}=e;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),h=e=>{const n=e.currentTarget,t=u.indexOf(n),o=l[t].value;o!==r&&(d(n),i(o))},p=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}n?.focus()};return(0,c.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,c.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>u.push(e),onKeyDown:p,onClick:h,...s,className:(0,o.A)("tabs__item",a.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function d(e){let{lazy:n,children:t,selectedValue:o}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,c.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function h(e){const n=(0,i.u)(e);return(0,c.jsxs)("div",{className:(0,o.A)("tabs-container",a.tabList),children:[(0,c.jsx)(u,{...n,...e}),(0,c.jsx)(d,{...n,...e})]})}function p(e){const n=(0,l.default)();return(0,c.jsx)(h,{...e,children:(0,i.v)(e.children)},String(n))}},8626:(e,n,t)=>{t.d(n,{u:()=>p,v:()=>c});var r=t(96540),o=t(56347),s=t(36494),i=t(62814),l=t(45167),a=t(69900);function c(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return c(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:o}}=e;return{value:n,label:t,attributes:r,default:o}}))}(t);return function(e){const n=(0,l.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function d(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function h(e){let{queryString:n=!1,groupId:t}=e;const s=(0,o.W6)(),l=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,i.aZ)(l),(0,r.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(s.location.search);n.set(l,e),s.replace({...s.location,search:n.toString()})}),[l,s])]}function p(e){const{defaultValue:n,queryString:t=!1,groupId:o}=e,i=u(e),[l,c]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!d({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[p,m]=h({queryString:t,groupId:o}),[f,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[o,s]=(0,a.Dv)(t);return[o,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:o}),b=(()=>{const e=p??f;return d({value:e,tabValues:i})?e:null})();(0,s.A)((()=>{b&&c(b)}),[b]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),m(e),g(e)}),[m,g,i]),tabValues:i}}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var r=t(96540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);