"use strict";(self.webpackChunkaoh_documentation=self.webpackChunkaoh_documentation||[]).push([[3487],{4277:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var o=s(74848),i=s(28453);const t={sidebar_position:1},r="Quickstart",c={id:"web/guides/quickstart",title:"Quickstart",description:"Pre-requisites",source:"@site/docs/40_web/10_guides/1-quickstart.md",sourceDirName:"40_web/10_guides",slug:"/web/guides/quickstart",permalink:"/aoh-docs/docs/web/guides/quickstart",draft:!1,unlisted:!1,editUrl:"https://github.com/mssfoobar/aoh-docs/tree/main/docs/40_web/10_guides/1-quickstart.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"web",previous:{title:"\ud83d\udcda Guides",permalink:"/aoh-docs/docs/category/-guides"},next:{title:"Configuration",permalink:"/aoh-docs/docs/web/guides/configuration"}},d={},l=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Running Locally",id:"running-locally",level:2},{value:"Docker",id:"docker",level:2},{value:"Using the <code>aoh-web</code> components as a dependency",id:"using-the-aoh-web-components-as-a-dependency",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"quickstart",children:"Quickstart"}),"\n",(0,o.jsx)(n.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,o.jsxs)(n.p,{children:["Please install the following programs and tools before setting up ",(0,o.jsx)(n.code,{children:"aoh-web"}),":"]}),"\n",(0,o.jsx)(n.p,{children:"Recommended Tools:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://code.visualstudio.com/download",children:"Visual Studio Code"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Docker Desktop"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Required:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://nodejs.org/en/",children:"node.js"})," (version ^18.12.1)"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://git-scm.com/downloads",children:"git"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"running-locally",children:"Running Locally"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Clone the repository:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/mssfoobar/aoh-web\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"caution",children:(0,o.jsxs)(n.p,{children:["If you are not contributing directly to ",(0,o.jsx)(n.code,{children:"aoh-web"}),", use ",(0,o.jsx)(n.a,{href:"https://github.com/mssfoobar-rnd/aoh-web",children:"https://github.com/mssfoobar-rnd/aoh-web"})," instead.\nYou should also fork the project instead if you are using it as a template."]})}),"\n",(0,o.jsxs)(n.p,{children:["Font Awesome requires an access token to install their modules from their private registry.\nYou will also need to set up your personal ",(0,o.jsx)(n.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",children:"GitHub Access Token"})," to access our GitHub Packages repository."]}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"Set up the access tokens:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm set //npm.fontawesome.com/:_authToken=<YOUR_FORTAWESOME_ACCESS_TOKEN>\nnpm set //npm.pkg.github.com/:_authToken=<YOUR_GITHUB_PERSONAL_ACCESS_TOKEN>\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Sensitive tokens are not stored online, you'll need to ask your project manager for help with getting the access tokens."})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["Copy the sample environment variable file and name it ",(0,o.jsx)(n.code,{children:".env"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cp .env.sample .env\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This ",(0,o.jsx)(n.code,{children:".env"})," file will have its values loaded by Vite (as well as docker-compose) upon building and is made available\nvia the ",(0,o.jsx)(n.a,{href:"https://kit.svelte.dev/docs/modules#$env-dynamic-private",children:"$env API in Svelte Kit"}),"."]}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Install the node modules"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Get the latest GraphQL schema"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm run getschema\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{type:"danger",children:[(0,o.jsxs)(n.p,{children:["There is a 'predev' npm script that attempts to re-generate our GraphQL types everytime you run ",(0,o.jsx)(n.code,{children:"npm run dev"}),"."]}),(0,o.jsxs)(n.p,{children:["You must ensure your ",(0,o.jsx)(n.code,{children:".env"})," file has the ",(0,o.jsx)(n.code,{children:"GRAPHQL_ENDPOINT"})," variable set for ",(0,o.jsx)(n.code,{children:"npm run getschema"})," to pull the schema from\nthe correct endpoint (see\n",(0,o.jsx)(n.a,{href:"/aoh-docs/docs/web/guides/development#query-types--graphql-codegen",children:"the development guide on getting types for GraphQL queries"}),")"]}),(0,o.jsxs)(n.p,{children:["If you do not have a GraphQL endpoint set up and wish to omit the type generation, you must delete the ",(0,o.jsx)(n.code,{children:"predev"})," script\nfrom the ",(0,o.jsx)(n.code,{children:"package.json"})," file to prevent the ",(0,o.jsx)(n.code,{children:"graphql-codegen"})," script from running."]})]}),"\n",(0,o.jsxs)(n.ol,{start:"6",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Generate the ",(0,o.jsx)(n.code,{children:".svelte-kit"})," folder"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npx svelte-kit sync\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["This command is also run as a pre-build step - it generates types from your code, including anything that's loaded in\nthe ",(0,o.jsx)(n.code,{children:".env"})," files, allowing you to have Intellisense for the environment variables and more good stuff."]}),"\n",(0,o.jsxs)(n.ol,{start:"7",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run the server in development mode"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Visit ",(0,o.jsx)(n.code,{children:"http://localhost:5173"})," to view the website"]}),"\n",(0,o.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,o.jsxs)(n.p,{children:["For development purposes, you should run the project locally. However, to run it with ",(0,o.jsx)(n.code,{children:"Docker"}),", ensure you have\n",(0,o.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Docker Desktop"})," installed."]}),"\n",(0,o.jsxs)(n.p,{children:["Before running the container, you must provide the access tokens for ",(0,o.jsx)(n.code,{children:"docker-compose"})," to read. In step 2, you would\nset it up with ",(0,o.jsx)(n.code,{children:"npm config"}),", but for our ",(0,o.jsx)(n.code,{children:"Docker"})," setup, you must pass them as environment variables:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"FORTAWESOME_ACCESS_TOKEN"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"GITHUB_ACCESS_TOKEN"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["You may do so by providing a ",(0,o.jsx)(n.code,{children:".env.local"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"FORTAWESOME_ACCESS_TOKEN=<YOUR_FORTAWESOME_ACCESS_TOKEN>\nGITHUB_ACCESS_TOKEN=<YOUR_GITHUB_PERSONAL_ACCESS_TOKEN>\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"caution",children:(0,o.jsxs)(n.p,{children:["It is ",(0,o.jsx)(n.strong,{children:"FORTAWESOME"})," with an '",(0,o.jsx)(n.em,{children:"R"}),"', not ",(0,o.jsx)(n.strong,{children:"FONTAWESOME"}),". Previous versions of AGIL Ops Hub used a FONTAWESOME token, this has changed as\nwe now host the packages ourselves for our CI to install. If you have a Fontawesome license and access to the official\nFortawesome private NPM registry, you should use that token and set up your CI with that instead."]})}),"\n",(0,o.jsxs)(n.p,{children:["You may also supply ",(0,o.jsx)(n.code,{children:"PORT"})," to override the default port."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"FORTAWESOME_ACCESS_TOKEN=<YOUR_FORAWESOME_ACCESS_TOKEN>\nGITHUB_ACCESS_TOKEN=<YOUR_GITHUB_PERSONAL_ACCESS_TOKEN>\n\n# Example to run on port 3001\nPORT=3001\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".env"})," is git ignored in our repo, do no put your tokens into the ",(0,o.jsx)(n.code,{children:".env"})," file; do not check your tokens into source!"]})}),"\n",(0,o.jsx)(n.p,{children:"Then, you can run the container with:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose up\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"docker-compose"})," also uses 2 more environment variables that are required during build time:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"IMAGE_TAG"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"PUBLIC_STATIC_BUILD_VERSION"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"These are to be set by the CI to allow us help with troubleshooting in deployed environments. For local development,\nthey are not necessary."}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"PUBLIC_STATIC_BUILD_VERSION"})," is used in the ar2's ",(0,o.jsx)(n.code,{children:"info"})," endpoint to provide the build version.\nSee the [API docs] for more information."]})}),"\n",(0,o.jsxs)(n.p,{children:["You may view the ",(0,o.jsx)(n.code,{children:"Dockerfile"})," and associated ",(0,o.jsx)(n.code,{children:"docker-compose"})," for more details."]}),"\n",(0,o.jsxs)(n.h2,{id:"using-the-aoh-web-components-as-a-dependency",children:["Using the ",(0,o.jsx)(n.code,{children:"aoh-web"})," components as a dependency"]}),"\n",(0,o.jsxs)(n.p,{children:["You can also use the published components by installing ",(0,o.jsx)(n.code,{children:"@mssfoobar/aoh-web"})," and all it's peer dependencies."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install @mssfoobar/aoh-web tailwindcss postcss svelte @sveltejs/kit\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"aoh-web"})," components are built for use in ",(0,o.jsx)(n.code,{children:"SvelteKit"})," projects only, and uses ",(0,o.jsx)(n.code,{children:"Tailwind CSS"}),".",(0,o.jsx)(n.br,{}),"\n","You must ",(0,o.jsx)(n.code,{children:"Svelte"})," and ",(0,o.jsx)(n.code,{children:"SvelteKit"})," installed and properly set up."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var o=s(96540);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);