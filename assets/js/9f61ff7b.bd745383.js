(self.webpackChunkar2_documentation=self.webpackChunkar2_documentation||[]).push([[1292],{10515:(e,t,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/web_architecture.17f8364.1118.png 1118w",images:[{path:i.p+"assets/ideal-img/web_architecture.17f8364.1118.png",width:1118,height:1162}],src:i.p+"assets/ideal-img/web_architecture.17f8364.1118.png",toString:function(){return i.p+"assets/ideal-img/web_architecture.17f8364.1118.png"},placeholder:void 0,width:1118,height:1162},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQYlTWOz07cMByE87h9gooTD1EVUVH1gPoQRRESF3pBKtVWpUu6gSW7JLGTn7O2Y+ev7UEBcRjN5dN8E9UG50L5vFH+P1mkgk+pMEjJhJTasCGDTFhcRtqGq+M7jY8rCd702KcN8rpDKXskJUMtB5DFNhJ6vrgsDOLCztQ6z+vB82r0THZ+m+0cP3So2nAfFTrEPWNAlrjSeLBnA150YKpH2rS+ViMq7ZNIWMSV7MFJOzIBogNED3A54pm052pCeZgWMMRkAK69q7QDVzPqNqAQBrebzFdyQNGMSUQGsTAB1L6CoVJzqNsQ2MGGp2LnazWBqXkBw49FSSZMwsKRhZM93FMzuG8/VxOT42JZLx+vmw54j7BvzZTD7SOhbIZlpIge88OHm1Xy/WaVfP319+Hs93r75U+yO/33kJ9kOX3a7OnzvjJHL1X9b+Rz7sgwAAAAAElFTkSuQmCC"}},34727:(e,t,i)=>{"use strict";i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>h,default:()=>g,frontMatter:()=>c,metadata:()=>l,toc:()=>u});var r=i(87462),s=(i(67294),i(3905)),a=i(15944),n=i(10515),o=i.n(n);const c={sidebar_position:6},h="Architecture",l={unversionedId:"web/architecture",id:"web/architecture",title:"Architecture",description:"This section describes how the web service interacts with other services, ignoring infrastructural modules such as",source:"@site/docs/web/architecture.md",sourceDirName:"web",slug:"/web/architecture",permalink:"/ar2-docs/docs/web/architecture",draft:!1,editUrl:"https://github.com/mssfoobar/ar2-docs/tree/main/docs/web/architecture.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"web",previous:{title:"Testing \ud83d\udd27",permalink:"/ar2-docs/docs/web/guides/testing/TDD Testing"},next:{title:"Technologies \ud83d\udd29",permalink:"/ar2-docs/docs/category/technologies-"}},d={},u=[],p={toc:u};function g(e){let{components:t,...i}=e;return(0,s.kt)("wrapper",(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"architecture"},"Architecture"),(0,s.kt)("p",null,"This section describes how the web service interacts with other services, ignoring infrastructural modules such as\nKubernetes, pods, containers etc."),(0,s.kt)("div",{class:"centerize"},(0,s.kt)(a.Z,{img:o(),width:"75%",mdxType:"Image"})),(0,s.kt)("p",null,"As the web server for your framework, it is the primary interface that users will interact with, and essentially depends\non everything else in the system to function properly. However, the components in the above diagram are the main,\ncritical pieces that the web server interfaces with."),(0,s.kt)("p",null,"The following is a brief description of the pieces in the diagram"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Browser")," - he clients that connect to the web server"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Web")," - the AGILRAD 2.0 web server"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Hasura")," - the server providing Graph QL API's - essentially the serving the purpose of what application servers do"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Identity Access Management")," - we use Keycloak for this, it is the identity provider for your users"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Application Database")," - the database hosting application data")),(0,s.kt)("p",null,"The initial unauthenticated request from the browser to the web server will result in the user being redirected to the\nIAM to log in. The authentication process is faciliated using the OIDC Authentication Code Flow. After this flow is\ncompleted, the web server will receive the JWT tokens for the user, and set them as cookies on the user's browser."),(0,s.kt)("p",null,"If the user's request to the desired route is valid and authorized, the initial page render will be done server-side.\nThis initial render gets data from Hasura using the user's JWT to provide authentication. Subsequent navigation is\nhandled on the browser and all Graph QL requests are sent directly to a Hasura instance that accepts cookie-based\nauthentication instead (this is for security reasons). Any updates in data is also done via Graph QL subscriptions over\nWebSocket. This allows for the interactive SPA (Single-Page Application) experience whilst also providing very fast\ninitial response from server-side rendering."))}g.isMDXComponent=!0}}]);