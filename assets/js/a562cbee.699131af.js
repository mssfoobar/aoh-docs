"use strict";(self.webpackChunkar2_documentation=self.webpackChunkar2_documentation||[]).push([[3187],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||a;return n?o.createElement(g,l(l({ref:t},u),{},{components:n})):o.createElement(g,l({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},18679:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(67294),r=n(86010);const a="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a,l),hidden:n},t)}},34259:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(87462),r=n(67294),a=n(86010),l=n(51048),i=n(33609),s=n(1943),p=n(72957);const u="tabList__CuJ",c="tabItem_LNqP";function d(e){const{lazy:t,block:n,defaultValue:l,values:d,groupId:m,className:g}=e,h=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=d??h.map((e=>{let{props:{value:t,label:n,attributes:o}}=e;return{value:t,label:n,attributes:o}})),b=(0,i.l)(f,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===l?l:l??h.find((e=>e.props.default))?.props.value??h[0].props.value;if(null!==y&&!f.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:k,setTabGroupChoices:N}=(0,s.U)(),[v,O]=(0,r.useState)(y),w=[],{blockElementScrollPositionUntilNextRender:E}=(0,p.o5)();if(null!=m){const e=k[m];null!=e&&e!==v&&f.some((t=>t.value===e))&&O(e)}const T=e=>{const t=e.currentTarget,n=w.indexOf(t),o=f[n].value;o!==v&&(E(t),O(o),null!=m&&N(m,String(o)))},_=e=>{let t=null;switch(e.key){case"Enter":T(e);break;case"ArrowRight":{const n=w.indexOf(e.currentTarget)+1;t=w[n]??w[0];break}case"ArrowLeft":{const n=w.indexOf(e.currentTarget)-1;t=w[n]??w[w.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,a.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},g)},f.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,key:t,ref:e=>w.push(e),onKeyDown:_,onClick:T},l,{className:(0,a.Z)("tabs__item",c,l?.className,{"tabs__item--active":v===t})}),n??t)}))),t?(0,r.cloneElement)(h.filter((e=>e.props.value===v))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}function m(e){const t=(0,l.Z)();return r.createElement(d,(0,o.Z)({key:String(t)},e))}},25370:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var o=n(87462),r=(n(67294),n(3905)),a=n(34259),l=n(18679);const i={sidebar_position:2},s="Development",p={unversionedId:"mapping/development",id:"mapping/development",title:"Development",description:"Tools Required",source:"@site/docs/mapping/development.md",sourceDirName:"mapping",slug:"/mapping/development",permalink:"/ar2-docs/docs/mapping/development",draft:!1,editUrl:"https://github.com/mssfoobar/ar2-docs/tree/main/docs/mapping/development.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"mapping",previous:{title:"Introduction",permalink:"/ar2-docs/docs/mapping/introduction"}},u={},c=[{value:"Tools Required",id:"tools-required",level:2}],d={toc:c};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"development"},"Development"),(0,r.kt)("h1",{id:"pre-processing"},"Pre-processing"),(0,r.kt)("h2",{id:"tools-required"},"Tools Required"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"AutoCAD LT"),(0,r.kt)("li",{parentName:"ul"},"JOSM (Java OpenStreetMap) Editor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ogr2ogr")," from GDAL")),(0,r.kt)("p",null,"Building floor plans typically come in drawing formats such as ",(0,r.kt)("inlineCode",{parentName:"p"},".dwg"),", which is predominantly used by AutoCAD. To open\nthis file, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"LibreCAD")," or preferably ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoCAD")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"AutoCAD LT"),'. The goal is to convert the drawing into\nGeoJSON, along with tag it with additional attributes that conforms to our concept of "Building" geo entities.'),(0,r.kt)("p",null,"First, we'll need to make sense of where the drawing is geographically. In AutoCAD, you can do this with its\ngeolocation feature, which you should be able to find in ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT > Set Location")," or as the ",(0,r.kt)("inlineCode",{parentName:"p"},"GEOGRAPHICLOCATION")," command."),(0,r.kt)("p",null,"The followng are step by step instructions on how to overlay your drawing onto a map, in the correct location."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"command: GEOGRAPHICLOCATION"),(0,r.kt)("li",{parentName:"ol"},"Set location from: Map"),(0,r.kt)("li",{parentName:"ol"},"Do you want to use Online Map Data?: Yes"),(0,r.kt)("li",{parentName:"ol"},"Search for the position your building is in, then right-click on the map and click ",(0,r.kt)("inlineCode",{parentName:"li"},"drop marker here"),". Note that the\nposition you pick on the map will be correlated to a position you pick in your drawing later on."),(0,r.kt)("li",{parentName:"ol"},"GIS Coordinate System: Pick the relevant system, you can refer to ",(0,r.kt)("a",{parentName:"li",href:"https://epsg.io/"},"epsg.io")," to look up what the\ncorrect code your building should be in."),(0,r.kt)("li",{parentName:"ol"},"Select the correct Time Zone based on your location"),(0,r.kt)("li",{parentName:"ol"},"Select and Drawing Unit based on scale of the drawing (likely in millimeters)"),(0,r.kt)("li",{parentName:"ol"},"Select a position in your drawing - this should match with the position you picked in the map earlier on."),(0,r.kt)("li",{parentName:"ol"},"Set the North direction - detailed building plans should have this information included for you to reference.")),(0,r.kt)("p",null,"Unfortunately, out of the box, AutoCAD does not allow us to directly query for the LatLong of points. So in the later\nsteps, you will need to manually find the points using Google Maps or some other tool."),(0,r.kt)("p",null,"Next, use ",(0,r.kt)("inlineCode",{parentName:"p"},"ogr2ogr")," to convert the drawing to GeoJSON with WGS84 as the coordinate reference system. ",(0,r.kt)("inlineCode",{parentName:"p"},"ogr2ogr")," does not\nproperly convert ",(0,r.kt)("inlineCode",{parentName:"p"},".dwg"),"."),(0,r.kt)("p",null,"In our example, we are using"),(0,r.kt)("p",null,"BP_WINDOW\nBP_WIN\nBP_WALL_TOP\nBP_WALL\nBP COLUMN"),(0,r.kt)("p",null,"layer names"),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Windows PowerShell",label:"Windows PowerShell",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ogr2ogr `\n-progress `\n-dialect sqlite `\n-sql \"SELECT * FROM entities WHERE layer in ('BP_WALL', 'BP_WALL_TOP', 'BP_WINDOW', 'BP_WIN', 'BP COLUMN')\" `\n-f 'GeoJSON' .\\OMEGA_ONE_STY_7.geojson .\\OMEGA_ONE_STY_7.dxf `\n-t_srs EPSG:4326 `\n-s_srs EPSG:3414\n"))),(0,r.kt)(l.Z,{value:"Linux",label:"Linux",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ogr2ogr \\\n-progress \\\n-dialect sqlite \\\n-sql \"SELECT * FROM entities WHERE layer in ('BP_WALL', 'BP_WALL_TOP', 'BP_WINDOW', 'BP_WIN', 'BP COLUMN')\" \\\n-f 'GeoJSON' .\\OMEGA_ONE_STY_7.geojson .\\OMEGA_ONE_STY_7.dxf \\\n-t_srs EPSG:4326 \\\n-s_srs EPSG:3414\n")))),(0,r.kt)("p",null,"This does not georectify your GeoJSON, but transforms it to be in ",(0,r.kt)("inlineCode",{parentName:"p"},"WGS84")," format, which is what GeoJSON is supposed to\nbe in. You can then further transform the points to be properly georectified by running it through ",(0,r.kt)("inlineCode",{parentName:"p"},"ogr2ogr")," again. But\nfirst, we need to find 3 reference coordinates that we can pass to ",(0,r.kt)("inlineCode",{parentName:"p"},"ogr2ogr")," to do the transformation."),(0,r.kt)(a.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Windows PowerShell",label:"Windows PowerShell",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ogr2ogr `\n    -progress `\n    -f 'GeoJSON' `\n    ./OMEGA_ONE_STY_7_GEORECT.geojson `\n    ./OMEGA_ONE_STY_7.geojson `\n    -gcp 1.26821735838468 106.398685289749 1.39010 103.84697 `\n    -gcp 0.863469976192515 106.398350183189 1.38965 103.84707 `\n    -gcp 0.862374623451951 107.686860346494 1.389988 103.848338\n\n"))),(0,r.kt)(l.Z,{value:"Linux",label:"Linux",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ogr2ogr \\\n    -progress \\\n    -f 'GeoJSON' \\\n    ./OMEGA_ONE_STY_7_GEORECT.geojson \\\n    ./OMEGA_ONE_STY_7.geojson \\\n    -gcp 0.2515287 2.81713315 1.39010 103.84697 \\\n    -gcp 0.86347005 106.3983503 1.38965 103.84707 \\\n    -gcp 0.86237445 107.6868602 1.389988 103.848338\n")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cat .\\OMEGA_ONE_STY_7.geojson | jq 'del(.features[].properties.PaperSpace, .features[].properties.SubClasses, .features[].Linetype )' > new.geojson\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"aws codeartifact login --tool npm --repository ar2-npm-group --namespace fortawesome --domain agilrad --domain-owner 991204835536\n")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},".DWG > ODAFIleConverter("),".DWG) > ",(0,r.kt)("em",{parentName:"p"},".DXF > LibreCAD("),".DXF) > ",(0,r.kt)("em",{parentName:"p"},".DXF > ogr2ogr2("),".DXF) > .GeoJSON >"),(0,r.kt)("p",null,"ST Engineering Hub:"),(0,r.kt)("p",null,"1.390108, 103.846971"))}m.isMDXComponent=!0}}]);