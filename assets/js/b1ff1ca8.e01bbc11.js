"use strict";(self.webpackChunkaoh_documentation=self.webpackChunkaoh_documentation||[]).push([[6667],{99087:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>a,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var r=n(74848),i=n(28453);const s={},o="Pre-requisites",l={id:"deployment/pre-requisites",title:"Pre-requisites",description:"Firewall requirement:",source:"@site/docs/30_deployment/20-pre-requisites.md",sourceDirName:"30_deployment",slug:"/deployment/pre-requisites",permalink:"/aoh-docs/docs/deployment/pre-requisites",draft:!1,unlisted:!1,editUrl:"https://github.com/mssfoobar/aoh-docs/tree/main/docs/30_deployment/20-pre-requisites.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"deployment",previous:{title:"Overview",permalink:"/aoh-docs/docs/deployment/overview"},next:{title:"Infra platform",permalink:"/aoh-docs/docs/category/infra-platform"}},d={},c=[{value:"Software for installation client:",id:"software-for-installation-client",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Checkout the following repositories",id:"checkout-the-following-repositories",level:2},{value:"Prepare new set of files for deployment",id:"prepare-new-set-of-files-for-deployment",level:2},{value:"obtain the latest DB package from here",id:"obtain-the-latest-db-package-from-here",level:2},{value:"top level domain",id:"top-level-domain",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,r.jsx)(t.p,{children:"Firewall requirement:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name "}),(0,r.jsx)("th",{children:"inbound/outbound "}),(0,r.jsx)("th",{children:"Port"}),(0,r.jsx)("th",{children:"type"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"APPS/Web"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"443"}),(0,r.jsx)("td",{children:"TCP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"APPS/Web/cloudwatch"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"443"}),(0,r.jsx)("td",{children:"TCP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"APPS"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"3478"}),(0,r.jsx)("td",{children:"UDP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"APPS"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"5000"}),(0,r.jsx)("td",{children:"UDP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"APPS"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"3478"}),(0,r.jsx)("td",{children:"TCP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Stun server\t"}),(0,r.jsx)("td",{children:" (inbound)"}),(0,r.jsx)("td",{children:"3478"}),(0,r.jsx)("td",{children:"UDP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"SFU TCP\t"}),(0,r.jsx)("td",{children:" (inbound)"}),(0,r.jsx)("td",{children:"3478"}),(0,r.jsx)("td",{children:"TCP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"SFU UDP\t\t"}),(0,r.jsx)("td",{children:" (inbound)"}),(0,r.jsx)("td",{children:"5000"}),(0,r.jsx)("td",{children:"UDP"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Database\t\t"}),(0,r.jsx)("td",{children:" (outbound)"}),(0,r.jsx)("td",{children:"5432"}),(0,r.jsx)("td",{children:"TCP"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"software-for-installation-client",children:"Software for installation client:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Aws CLI"}),"\n",(0,r.jsx)(t.li,{children:"Terraform"}),"\n",(0,r.jsx)(t.li,{children:"Kubectl"}),"\n",(0,r.jsx)(t.li,{children:"Helm"}),"\n",(0,r.jsx)(t.li,{children:"Git"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Install the software listed above on the client you are using to spawn the AOH cluster"}),"\n",(0,r.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(t.p,{children:"AWS account and profile"}),"\n",(0,r.jsx)(t.p,{children:"To set profile:"}),"\n",(0,r.jsx)(t.p,{children:"For windows:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"setx AWS_PROFILE <clustername>\naws eks update-kubeconfig --region ap-southeast-1  --name <clustername>\n"})}),"\n",(0,r.jsx)(t.p,{children:"For linux:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"export AWS_PROFILE=<clustername>\naws eks update-kubeconfig --region ap-southeast-1  --name <clustername>\n"})}),"\n",(0,r.jsx)(t.p,{children:'Log into your aws account.\nCheck that your ".aws" folder is populated with the correct credential.'}),"\n",(0,r.jsx)(t.h2,{id:"checkout-the-following-repositories",children:"Checkout the following repositories"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/mssfoobar/ar2-infra",children:"https://github.com/mssfoobar/ar2-infra"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/mssfoobar/aoh-web-infra",children:"https://github.com/mssfoobar/aoh-web-infra"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/mssfoobar/ar2-ucs-infra",children:"https://github.com/mssfoobar/ar2-ucs-infra"})}),"\n",(0,r.jsx)(t.h2,{id:"prepare-new-set-of-files-for-deployment",children:"Prepare new set of files for deployment"}),"\n",(0,r.jsx)(t.p,{children:'clone the files by running the script "ar2-infra/new_cluster.sh"'}),"\n",(0,r.jsx)(t.h2,{id:"obtain-the-latest-db-package-from-here",children:"obtain the latest DB package from here"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://github.com/mssfoobar/aoh-db",children:"https://github.com/mssfoobar/aoh-db"})}),"\n",(0,r.jsx)(t.h2,{id:"top-level-domain",children:"top level domain"}),"\n",(0,r.jsx)(t.p,{children:"Prepare a top level domain to be used by AOH.\nThe AOH applications requires an endpoint to be reachable from the internet to function.\nFor example:\n*.wfm-alpha.agilrad.com"})]})}function a(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>l});var r=n(96540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);