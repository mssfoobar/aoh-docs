"use strict";(self.webpackChunkar2_documentation=self.webpackChunkar2_documentation||[]).push([[7711],{3905:(e,r,n)=>{n.d(r,{Zo:()=>u,kt:()=>h});var t=n(67294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function s(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=t.createContext({}),l=function(e){var r=t.useContext(p),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},u=function(e){var r=l(e.components);return t.createElement(p.Provider,{value:r},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},m=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=o,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||a;return n?t.createElement(h,i(i({ref:r},u),{},{components:n})):t.createElement(h,i({ref:r},u))}));function h(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var s={};for(var p in r)hasOwnProperty.call(r,p)&&(s[p]=r[p]);s.originalType=e,s[c]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},64862:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var t=n(87462),o=(n(67294),n(3905));const a={sidebar_position:3},i="Common Errors & Mistakes \u274c",s={unversionedId:"overview/reference/common",id:"overview/reference/common",title:"Common Errors & Mistakes \u274c",description:"Web",source:"@site/docs/overview/reference/common.md",sourceDirName:"overview/reference",slug:"/overview/reference/common",permalink:"/ar2-docs/docs/overview/reference/common",draft:!1,editUrl:"https://github.com/mssfoobar/ar2-docs/tree/main/docs/overview/reference/common.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"overview",previous:{title:"Pitfalls \u26b0\ufe0f",permalink:"/ar2-docs/docs/overview/reference/pitfalls"},next:{title:"Known Issues \ud83d\udd25",permalink:"/ar2-docs/docs/overview/reference/known-issues"}},p={},l=[{value:"Web",id:"web",level:2},{value:"Errors when executing <code>npm run dev</code>",id:"errors-when-executing-npm-run-dev",level:3},{value:"ERR_MODULE_NOT_FOUND",id:"err_module_not_found",level:4},{value:"No matching export in <code>&quot;src/generated/types.ts for import &quot;...&quot;</code>",id:"no-matching-export-in-srcgeneratedtypests-for-import-",level:4},{value:"Error when executing <code>npm run getschema</code>",id:"error-when-executing-npm-run-getschema",level:3},{value:"endpoint is required: <code>gq &lt;endpoint&gt;</code>",id:"endpoint-is-required-gq-endpoint",level:4},{value:"Executing query... error: <code>invalid x-hasura-admin-secret/x-hasura-access-key</code>",id:"executing-query-error-invalid-x-hasura-admin-secretx-hasura-access-key",level:4},{value:"Error when executing <code>npm run generate</code>",id:"error-when-executing-npm-run-generate",level:3},{value:"Missing user role",id:"missing-user-role",level:3},{value:"Database",id:"database",level:2},{value:"Error when restoring SQL dump",id:"error-when-restoring-sql-dump",level:3}],u={toc:l};function c(e){let{components:r,...n}=e;return(0,o.kt)("wrapper",(0,t.Z)({},u,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"common-errors--mistakes-"},"Common Errors & Mistakes \u274c"),(0,o.kt)("h2",{id:"web"},"Web"),(0,o.kt)("h3",{id:"errors-when-executing-npm-run-dev"},"Errors when executing ",(0,o.kt)("inlineCode",{parentName:"h3"},"npm run dev")),(0,o.kt)("h4",{id:"err_module_not_found"},"ERR_MODULE_NOT_FOUND"),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"error when starting dev server:\nError [ERR_MODULE_NOT_FOUND]: Cannot find package '...' imported from ...\n")),(0,o.kt)("p",null,"This type of error (ERR_MODULE_NOT_FOUND) typically happens when a new npm package is included into the project and you were not informed\nof it, or might have forgotten to add/install it. You shouldbe able to resolve it simply by installing the new package."),(0,o.kt)("p",null,"Run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm install\n")),(0,o.kt)("h4",{id:"no-matching-export-in-srcgeneratedtypests-for-import-"},"No matching export in ",(0,o.kt)("inlineCode",{parentName:"h4"},'"src/generated/types.ts for import "..."')),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'X [ERROR] No matching export in "src/generated/types.ts" for import "MapDataDocument"\n\n    src/routes/(app)/map-view/+page.ts:4:28:\n      4 \u2502 import { type MapDataQuery, MapDataDocument } from \'$generated-types\';\n')),(0,o.kt)("p",null,"You need to run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run generate")," to generate the types from the GraphQL schema. This is likely to occur when you've\npulled other developers' changes and they might have added new queries to the project."),(0,o.kt)("h3",{id:"error-when-executing-npm-run-getschema"},"Error when executing ",(0,o.kt)("inlineCode",{parentName:"h3"},"npm run getschema")),(0,o.kt)("h4",{id:"endpoint-is-required-gq-endpoint"},"endpoint is required: ",(0,o.kt)("inlineCode",{parentName:"h4"},"gq <endpoint>")),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'> @mssfoobar/ar2-web@0.2.0 getschema\n> env-cmd -f .env.development -x gq -H "X-Hasura-Admin-Secret: $PUBLIC_HASURA_ADMIN_KEY" --introspect > schema.graphql\n\n \xbb   Error: endpoint is required: `gq <endpoint>`\n')),(0,o.kt)("p",null,"Our usage of the ",(0,o.kt)("inlineCode",{parentName:"p"},"gq")," command (which is 'graphqurl') requires the environment variable ",(0,o.kt)("inlineCode",{parentName:"p"},"GRAPHQURL_ENDPOINT")," - it is not\nset in your ",(0,o.kt)("inlineCode",{parentName:"p"},".env.development")," file, check the\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/mssfoobar/ar2-web/wiki/Environment-Variables"},"ar2-web wiki")," on what value you might need to set for\nit."),(0,o.kt)("h4",{id:"executing-query-error-invalid-x-hasura-admin-secretx-hasura-access-key"},"Executing query... error: ",(0,o.kt)("inlineCode",{parentName:"h4"},"invalid x-hasura-admin-secret/x-hasura-access-key")),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> @mssfoobar/ar2-web@0.2.0 getschema\n\nExecuting query... error\nError:  {\n  errors: [\n    {\n      extensions: [Object],\n      message: 'invalid x-hasura-admin-secret/x-hasura-access-key'\n    }\n  ]\n}\n")),(0,o.kt)("p",null,"Calling the introspection endpoint to get the full schema requires privileged access. You need to set the\n",(0,o.kt)("inlineCode",{parentName:"p"},"PUBLIC_HASURA_ADMIN_KEY")," environment variable in your ",(0,o.kt)("inlineCode",{parentName:"p"},".env.development")," file, check the\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/mssfoobar/ar2-web/wiki/Environment-Variables"},"ar2-web wiki")," on what value you might need to set for\nit."),(0,o.kt)("h3",{id:"error-when-executing-npm-run-generate"},"Error when executing ",(0,o.kt)("inlineCode",{parentName:"h3"},"npm run generate")),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u2714 Parse Configuration\n\u26a0 Generate outputs\n  \u276f Generate src/generated/types.ts\n    \u2714 Load GraphQL schemas\n    \u2714 Load GraphQL documents\n    \u2716 Not all operations have an unique name: EmergencyDepartmentData\n")),(0,o.kt)("p",null,"This error occurs when you run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run generate")," when you already have generated types, and graphql-codegen seems to attempt to merge the types instead of replace them."),(0,o.kt)("p",null,"Delete your ",(0,o.kt)("inlineCode",{parentName:"p"},"/src/generated")," folder (or just the ",(0,o.kt)("inlineCode",{parentName:"p"},"/src/generated/types.ts"),") and run the command again, it should generate the types just fine."),(0,o.kt)("p",null,"You can do this by running ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run clean"),", which deletes the generated types."),(0,o.kt)("p",null,"This can also occur when not all operations have a unique name - especially if you had multiple identical operations in different files, then changed one of them without renaming them (so you really ended up with 2 different operations with the same name)."),(0,o.kt)("h3",{id:"missing-user-role"},"Missing user role"),(0,o.kt)("p",null,"Users' current role is based on their ",(0,o.kt)("inlineCode",{parentName:"p"},"active_membership")," relationship to a membership they have. This is through the\nforeign key ",(0,o.kt)("inlineCode",{parentName:"p"},"membership_id")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"user_user")," table. It is highly likely that the user has no active membership set\n(no ",(0,o.kt)("inlineCode",{parentName:"p"},"membership_id")," set). This relationship is used by Keycloak to populate the access token with the claims for the\nuser's role."),(0,o.kt)("h2",{id:"database"},"Database"),(0,o.kt)("h3",{id:"error-when-restoring-sql-dump"},"Error when restoring SQL dump"),(0,o.kt)("p",null,"Sample Error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ar2-database-postgres-1        | psql:/docker-entrypoint-initdb.d/dump.sql:243: ERROR:  end-of-copy marker corrupt\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"dump.sql")," file is likely invalid - take precaution to not auto-format SQL files upon saving unless you are sure of your formatter.\nThe same applies to .yml files (wherein the indentation matters)."))}c.isMDXComponent=!0}}]);